#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ –ø—Ä–æ–µ–∫—Ç–æ–º

echo "üìù –í–≤–µ–¥–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –∫–æ–º–º–∏—Ç–∞:"
read commit_msg

echo ""
echo "üì¶ –ö–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:"
echo "  1. pip freeze > requirements.txt"
echo "  2. git add ."
echo "  3. git commit -m \"$commit_msg\""
echo "  4. git push"
echo ""

echo "üöÄ –í—ã–ø–æ–ª–Ω—è–µ–º –∫–æ–º–∞–Ω–¥—ã..."

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
echo "üëâ pip freeze > requirements.txt"
pip freeze > requirements.txt

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ –∏–Ω–¥–µ–∫—Å
echo ""
echo "üëâ git add ."
git add .

# –ö–æ–º–º–∏—Ç
echo ""
echo "üëâ git commit -m \"$commit_msg\""
git commit -m "$commit_msg"

if [ $? -ne 0 ]; then
  echo "‚ùå –ö–æ–º–º–∏—Ç –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω. –í–æ–∑–º–æ–∂–Ω–æ, –Ω–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –∫–æ–º–º–∏—Ç–∞."
  exit 1
fi

# –ü—É—à
echo ""
echo "üëâ git push"
git push

echo ""
echo "‚úÖ –í—Å—ë –≥–æ—Ç–æ–≤–æ. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã, –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ GitHub."